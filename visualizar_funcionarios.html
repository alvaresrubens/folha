<html>


<head>
    <title>
        Calculadora 2.0
    </title>

    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" type="text/css" href="geral.css" />

<body>
    <fieldset>
        <div>Calculadora 2.0 - CIN7928-06342B (20192) - Tópicos Especiais em Informação e Tecnologia </div>

    </fieldset>

    <div class="container">
        <div class='row-container'>
            <div> <a class="menu" href="calculadora.html">Calculadora</a> </div>
            <div> <a class="menu" href="folha.html">Folha de pagamento </a> </div>
        </div>
    </div>
    <div class="container">
        <div class="texto">Cadastro de Funcionário </div>
    </div>
    <div class="container">
        <div class='row-container'>
            <div> <a class="visorOperacao" href="folha.html">Incluir funcionários</a> </div>
            <div> <a class="visorOperacao" href="visualizar_funcionarios.html">Visualizar funcionários</a> </div>

        </div>
    </div>

    <div class="container">

        <div class="table-row header">
            <div class="text">CPF</div>
            <div class="text">Nome</div>
            <div class="text">Sobrenome</div>
            <div class="text">Cargo</div>
            <div class="text">E-mail</div>
            <div class="text">Data de admissão</div>
            <div class="text">Anos de empresa</div>
            <div class="text">Salário Bruto</div>
            <div class="text">Salário Líquido</div>


        </div>
        <div id="resultado">
            <div class="table-row" v-for="funcionario in funcionarioList">
                <div class="text" id="cpf">{{funcionario.cpf}}</div>
                <div class="text" id="nome">{{funcionario.nome}}</div>
                <div class="text" id="sobrenome">{{funcionario.sobrenome}}</div>
                <div class="text" id="cargo">{{funcionario.cargo}}</div>
                <div class="text" id="email">{{funcionario.email}}</div>
                <div class="text" id="admissao">{{funcionario.admissao}}</div>
                <div class="text" id="anos">{{calculaAnos(funcionario.admissao)}}</div>
                <div class="text" id="bruto">R${{funcionario.salario}}</div>
                <div class="num" id="liquido">R${{salarioLiquido(funcionario.salario, funcionario.desconto)}}</div>
                <div class="item"><button class="funcao" type="button" v-on:click="deletaFuncionario(funcionario)"><img
                            src="lixo.png"></button></div>
                <div class="item"><button class="funcao" type="button" v-on:click="editaFuncionario(funcionario)"><img
                            src="editar.png"></button></div>

            </div>
        </div>

    </div>


    </div>

    <script>
        var result = new Vue({
            el: "#resultado",
            methods: {
                deletaFuncionario: function (funcionario) {

                    for (let funcionarioAux in this.funcionarioList) {

                        if (this.funcionarioList[funcionarioAux].cpf == funcionario.cpf) {
                            this.funcionarioList.splice(funcionarioAux, 1);
                            localStorage.setItem("lista_dados_envio", JSON.stringify(this.funcionarioList));
                        }

                    }

                },
                editaFuncionario: function (funcionario) {

                    widow.open(folha.html);
                },
                salarioLiquido: function (salario, desconto) {

                    return salario - salario * (desconto / 100);
                },
                calculaAnos: function (admissao) {
                    var data1 = admissao.substring(0, 4);
                    return (new Date().getFullYear()) - data1;
                }
            },

            data: {
                funcionarioList: [],
            },
            mounted() {

                this.funcionarioList = JSON.parse(localStorage.getItem("lista_dados_envio"))

            }
        })
    </script>
</body>

</head>
<footer>
    <p>Feito por: Rubens David Alvares da Silva </p>
</footer>

</html>